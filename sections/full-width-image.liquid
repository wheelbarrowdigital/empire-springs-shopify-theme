<div class="w-full relative {{ section.settings.section_height }}">
  {% if section.settings.image %}
    <div class="relative h-full">
      {% assign image_sizes = '(min-width: 1536px) 1536px, (min-width: 1280px) 1280px, (min-width: 1024px) 1024px, (min-width: 768px) 768px, (min-width: 640px) 640px, 100vw' %}
      
      {% if section.settings.image_mobile %}
        <!-- Desktop Image -->
        <picture>
          <source media="(min-width: 768px)" srcset="{{ section.settings.image | image_url: width: 2000 }}">
          <source media="(max-width: 767px)" srcset="{{ section.settings.image_mobile | image_url: width: 800 }}">
          <img
            src="{{ section.settings.image | image_url: width: 2000 }}"
            alt="{{ section.settings.image_alt | default: section.settings.image.alt | escape }}"
            class="w-full h-full object-cover"
            loading="lazy"
            width="2000"
            height="{{ 2000 | divided_by: section.settings.image.aspect_ratio | round }}"
          >
        </picture>
      {% else %}
        <img
          src="{{ section.settings.image | image_url: width: 2000 }}"
          alt="{{ section.settings.image_alt | default: section.settings.image.alt | escape }}"
          class="w-full h-full object-{{ section.settings.image_position }}"
          loading="lazy"
          sizes="{{ image_sizes }}"
          width="2000"
          height="{{ 2000 | divided_by: section.settings.image.aspect_ratio | round }}"
        >
      {% endif %}

      <!-- Overlay -->
      {% if section.settings.enable_overlay %}
        <div class="absolute inset-0 bg-black/{{ section.settings.overlay_opacity }}"></div>
      {% endif %}

      <!-- Content Overlay -->
      {% if section.settings.heading != blank or section.settings.text != blank or section.settings.button_label != blank %}
        <div class="absolute inset-0 flex items-{{ section.settings.content_position_vertical }} justify-{{ section.settings.content_position_horizontal }} p-8 md:p-12 lg:p-20">
          <div class="text-{{ section.settings.text_alignment }} max-w-2xl">
            {% if section.settings.heading != blank %}
              <h2 class="text-{{ section.settings.heading_size }} font-black uppercase tracking-tight {{ section.settings.text_color }} mb-4">
                {{ section.settings.heading }}
              </h2>
            {% endif %}
            
            {% if section.settings.text != blank %}
              <div class="{{ section.settings.text_color }} opacity-90 mb-6">
                {{ section.settings.text }}
              </div>
            {% endif %}

            {% if section.settings.button_label != blank and section.settings.button_link != blank %}
              <a href="{{ section.settings.button_link }}" class="inline-block {{ section.settings.button_style }} px-8 py-3 uppercase tracking-wider hover:opacity-80 transition-opacity">
                {{ section.settings.button_label }}
              </a>
            {% endif %}
          </div>
        </div>
      {% endif %}
    </div>
  {% else %}
    <div class="w-full h-full bg-zinc-900 flex items-center justify-center">
      <span class="text-zinc-600 text-lg uppercase tracking-widest">Full Width Image</span>
    </div>
  {% endif %}

  {% if section.settings.link and section.settings.button_label == blank %}
    <a href="{{ section.settings.link }}" class="absolute inset-0" aria-label="{{ section.settings.image_alt | default: 'View more' }}"></a>
  {% endif %}
</div>

{% schema %}
{
  "name": "Full Width Image",
  "tag": "section",
  "class": "full-width-image",
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image (Optional)",
      "info": "Use a different image for mobile devices"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "Image Alt Text",
      "info": "Describe the image for accessibility"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "cover"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "section_height",
      "label": "Section Height",
      "options": [
        {
          "value": "h-64",
          "label": "Small (16rem)"
        },
        {
          "value": "h-96",
          "label": "Medium (24rem)"
        },
        {
          "value": "h-[32rem]",
          "label": "Large (32rem)"
        },
        {
          "value": "h-[40rem]",
          "label": "Extra Large (40rem)"
        },
        {
          "value": "h-screen",
          "label": "Full Screen"
        },
        {
          "value": "h-auto",
          "label": "Auto (Natural Height)"
        }
      ],
      "default": "h-96"
    },
    {
      "type": "header",
      "content": "Overlay"
    },
    {
      "type": "checkbox",
      "id": "enable_overlay",
      "label": "Enable Dark Overlay",
      "default": false
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 90,
      "step": 10,
      "default": 50,
      "info": "Only applies when overlay is enabled"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading Size",
      "options": [
        {
          "value": "2xl md:text-3xl lg:text-4xl",
          "label": "Small"
        },
        {
          "value": "3xl md:text-4xl lg:text-5xl",
          "label": "Medium"
        },
        {
          "value": "4xl md:text-5xl lg:text-6xl",
          "label": "Large"
        },
        {
          "value": "5xl md:text-6xl lg:text-7xl",
          "label": "Extra Large"
        }
      ],
      "default": "4xl md:text-5xl lg:text-6xl"
    },
    {
      "type": "select",
      "id": "text_color",
      "label": "Text Color",
      "options": [
        {
          "value": "text-white",
          "label": "White"
        },
        {
          "value": "text-black",
          "label": "Black"
        }
      ],
      "default": "text-white"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "content_position_horizontal",
      "label": "Content Position - Horizontal",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "content_position_vertical",
      "label": "Content Position - Vertical",
      "options": [
        {
          "value": "start",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Middle"
        },
        {
          "value": "end",
          "label": "Bottom"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "options": [
        {
          "value": "bg-white text-black",
          "label": "White"
        },
        {
          "value": "bg-black text-white",
          "label": "Black"
        },
        {
          "value": "bg-transparent text-white border-2 border-white",
          "label": "Outline White"
        },
        {
          "value": "bg-transparent text-black border-2 border-black",
          "label": "Outline Black"
        }
      ],
      "default": "bg-white text-black"
    },
    {
      "type": "header",
      "content": "Link"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Image Link",
      "info": "Makes the entire image clickable (ignored if button is present)"
    }
  ],
  "presets": [
    {
      "name": "Full Width Image",
      "category": "Image"
    }
  ]
}
{% endschema %}